### 込み置き場

書き換えのフレーズで後から使うかもというのをこのファイルに置いておく。

参考文献1の内部インタプリタが仮想CPUの機械語ニーモニックで記述されており、これを出発点とする。

この仮想機械は、`I`, `WA`, `CA` の3レジスタ、`RS`, `SP`のスタックポインタ2つ、これとPCプログラムカウンタを持つ。アドレス空間16ビット、データレジスタ16ビットで作ることとする。よって、これら6レジスタは全て16ビット幅である。

 Register|Description  
 |--|--|
 I|インストラクションレジスタ。現在実行中のセカンダリワードの中で次の命令のアドレスを保持する。
 WA|ワードアドレスレジスタ。現在実行中のキーワードのアドレス、または、現在のキーワードのボディ位置の最初のコードのアドレスを保持する。
 CA|コードアドレスレジスタ。
 RS|リターンスタックレジスタ
 SP|スタックポインタレジスタ
 PC|プロセッサのプログラムカウンタレジスタ

内部インタプリタで使うインストラクションは、

 |Instruction|Description|
 |--|--|
 @A-B|レジスタAが保持するアドレスの位置の内容を、レジスタBにロードする(AからBへの16ビット間接フェッチ)。
 A=A+n|レジスタAを定数nだけ増やす。
 POP S-A|SプッシュダウンスタックのトップエントリをレジスタAにロードし、スタックポインタを更新する。
 PSH A-S|レジスタAの内容をSプッシュダウンスタックにロードし、スタックポインタを更新する。
 A-PC  |レジスタAの内容をPCにロードする。プロセッサはこの位置から次に実行する命令をフェッチする。
 JMP XX  |本ジャンプ命令の次のワードが保持するアドレスに無条件ジャンプする。

レジスタ・レジスタ間、レジスタ・メモリ間のムーブ、プッシュポップ、ジャンプ命令、PCロード(これはレジスタ間転送としてもよい)が必要と分かる。

実際に使えるForthインタプリタを作るためには、これらとは別に算術演算系の命令が大量に必要となる。これも含めて仮想CPUのアーキテクチャと機械語命令を設計する。

レジスタセットと命令表は以下を参照のこと。

[Virtual CPU ... Registers and Instruction Set](./REGISTER_INSTRUCTION.md)

参考までに、
